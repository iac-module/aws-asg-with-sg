# aws-asg-with-sg
This is a compiled terraform module capable of creating:
- AWS autoscaling group
- Security Group
<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.5.0 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | >= 5.33.0 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | >= 5.33.0 |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_autoscaling"></a> [autoscaling](#module\_autoscaling) | git::https://github.com/terraform-aws-modules/terraform-aws-autoscaling.git// | 173e7613909bf0ee183ca635e3d08a4ac70238e3 |
| <a name="module_security_group"></a> [security\_group](#module\_security\_group) | git::https://github.com/terraform-aws-modules/terraform-aws-security-group.git// | 20e107f1658bc5c8b23efce2e17406e74e6cbeae |

## Resources

| Name | Type |
|------|------|
| [aws_ssm_parameter.ecs_optimized_ami](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/ssm_parameter) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_autoscaling"></a> [autoscaling](#input\_autoscaling) | Security group variables | <pre>object({<br><br>    create                          = optional(bool, true)<br>    ignore_desired_capacity_changes = optional(bool, false)<br>    name                            = string<br>    use_name_prefix                 = optional(bool, true)<br>    instance_name                   = optional(string, "")<br>    launch_template_id              = optional(string, null)<br>    launch_template_version         = optional(string, null)<br>    availability_zones              = optional(list(string), null)<br>    vpc_zone_identifier             = optional(list(string), null)<br>    min_size                        = optional(number, 0)<br>    max_size                        = optional(number, 5)<br>    desired_capacity                = optional(string, 0)<br>    desired_capacity_type           = optional(string, null)<br>    capacity_rebalance              = optional(bool, null)<br>    min_elb_capacity                = optional(number, null)<br>    wait_for_elb_capacity           = optional(number, null)<br>    wait_for_capacity_timeout       = optional(string, null)<br>    default_cooldown                = optional(number, null)<br>    default_instance_warmup         = optional(number, null)<br>    protect_from_scale_in           = optional(bool, false)<br>    load_balancers                  = optional(list(string), [])<br>    target_group_arns               = optional(list(string), [])<br>    placement_group                 = optional(string, null)<br>    health_check_type               = optional(string, "EC2")<br>    health_check_grace_period       = optional(number, null)<br>    force_delete                    = optional(bool, null)<br>    termination_policies            = optional(list(string), [])<br>    suspended_processes             = optional(list(string), [])<br>    max_instance_lifetime           = optional(number, null)<br>    enabled_metrics                 = optional(list(string), [])<br>    metrics_granularity             = optional(string, null)<br>    service_linked_role_arn         = optional(string, null)<br>    initial_lifecycle_hooks         = optional(list(map(string)), [])<br>    instance_refresh                = optional(any, {})<br>    use_mixed_instances_policy      = optional(bool, false)<br>    mixed_instances_policy          = optional(any, {})<br>    delete_timeout                  = optional(string, null)<br>    tags                            = optional(map(string), {})<br>    warm_pool                       = optional(any, {})<br>    ebs_optimized                   = optional(bool, null)<br>    image_id                        = optional(string, "")<br>    instance_type                   = optional(string, null)<br>    instance_requirements           = optional(any, {})<br>    key_name                        = optional(string, null)<br>    user_data                       = optional(string, null)<br>    security_groups                 = optional(list(string), [])<br>    enable_monitoring               = optional(bool, true)<br>    metadata_options                = optional(map(string), {})<br>    autoscaling_group_tags = optional(map(string), {<br>      AmazonECSManaged = true<br>    })<br>    ignore_failed_scaling_activities     = optional(bool, false)<br>    instance_maintenance_policy          = optional(map(any), {})<br>    create_launch_template               = optional(bool, true)<br>    launch_template_name                 = optional(string, "")<br>    launch_template_use_name_prefix      = optional(bool, true)<br>    launch_template_description          = optional(string, null)<br>    default_version                      = optional(string, null)<br>    update_default_version               = optional(string, null)<br>    disable_api_termination              = optional(bool, false)<br>    disable_api_stop                     = optional(bool, false)<br>    instance_initiated_shutdown_behavior = optional(string, null)<br>    kernel_id                            = optional(string, null)<br>    ram_disk_id                          = optional(string, null)<br>    block_device_mappings                = optional(list(any), [])<br>    capacity_reservation_specification   = optional(any, {})<br>    cpu_options                          = optional(map(string), {})<br>    credit_specification                 = optional(map(string), {})<br>    elastic_gpu_specifications           = optional(map(string), {})<br>    elastic_inference_accelerator        = optional(map(string), {})<br>    enclave_options                      = optional(map(string), {})<br>    hibernation_options                  = optional(map(string), {})<br>    instance_market_options              = optional(any, {})<br>    license_specifications               = optional(map(string), {})<br>    maintenance_options                  = optional(any, {})<br>    network_interfaces                   = optional(list(any), [])<br>    placement                            = optional(map(string), {})<br>    private_dns_name_options             = optional(map(string), {})<br>    tag_specifications                   = optional(list(any), [])<br>    create_traffic_source_attachment     = optional(bool, false)<br>    traffic_source_identifier            = optional(string, "")<br>    traffic_source_type                  = optional(string, "elbv2")<br>    create_schedule                      = optional(bool, true)<br>    schedules                            = optional(map(any), {})<br>    create_scaling_policy                = optional(bool, true)<br>    scaling_policies                     = optional(any, {})<br>    create_iam_instance_profile          = optional(bool, false)<br>    iam_instance_profile_arn             = optional(string, null)<br>    iam_instance_profile_name            = optional(string, null)<br>    iam_role_name                        = optional(string, null)<br>    iam_role_use_name_prefix             = optional(bool, true)<br>    iam_role_path                        = optional(string, null)<br>    iam_role_description                 = optional(string, null)<br>    iam_role_permissions_boundary        = optional(string, null)<br>    iam_role_policies = optional(map(string), {<br>      AmazonEC2ContainerServiceforEC2Role = "arn:aws:iam::aws:policy/service-role/AmazonEC2ContainerServiceforEC2Role"<br>      AmazonSSMManagedInstanceCore        = "arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"<br>    })<br>    iam_role_tags = optional(map(string), {})<br>    putin_khuylo  = optional(bool, true)<br>  })</pre> | n/a | yes |
| <a name="input_security_group"></a> [security\_group](#input\_security\_group) | Security group variables | <pre>object({<br>    create                                                   = optional(bool, true)<br>    create_sg                                                = optional(bool, true)<br>    security_group_id                                        = optional(string, null)<br>    vpc_id                                                   = string<br>    name                                                     = string<br>    use_name_prefix                                          = optional(bool, true)<br>    description                                              = optional(string, "Security Group managed by Terraform")<br>    revoke_rules_on_delete                                   = optional(bool, false)<br>    tags                                                     = optional(map(string), {})<br>    create_timeout                                           = optional(string, "10m")<br>    delete_timeout                                           = optional(string, "15m")<br>    ingress_rules                                            = optional(list(string), [])<br>    ingress_with_self                                        = optional(list(map(string)), [])<br>    ingress_with_cidr_blocks                                 = optional(list(map(string)), [])<br>    ingress_with_ipv6_cidr_blocks                            = optional(list(map(string)), [])<br>    ingress_with_source_security_group_id                    = optional(list(map(string)), [])<br>    ingress_cidr_blocks                                      = optional(list(string), [])<br>    ingress_ipv6_cidr_blocks                                 = optional(list(string), [])<br>    ingress_prefix_list_ids                                  = optional(list(string), [])<br>    ingress_with_prefix_list_ids                             = optional(list(map(string)), [])<br>    computed_ingress_rules                                   = optional(list(string), [])<br>    computed_ingress_with_self                               = optional(list(map(string)), [])<br>    computed_ingress_with_cidr_blocks                        = optional(list(map(string)), [])<br>    computed_ingress_with_ipv6_cidr_blocks                   = optional(list(map(string)), [])<br>    computed_ingress_with_source_security_group_id           = optional(list(map(string)), [])<br>    computed_ingress_with_prefix_list_ids                    = optional(list(map(string)), [])<br>    number_of_computed_ingress_rules                         = optional(number, 0)<br>    number_of_computed_ingress_with_self                     = optional(number, 0)<br>    number_of_computed_ingress_with_cidr_blocks              = optional(number, 0)<br>    number_of_computed_ingress_with_ipv6_cidr_blocks         = optional(number, 0)<br>    number_of_computed_ingress_with_source_security_group_id = optional(number, 0)<br>    number_of_computed_ingress_with_prefix_list_ids          = optional(number, 0)<br>    egress_rules                                             = optional(list(string), [])<br>    egress_with_self                                         = optional(list(map(string)), [])<br>    egress_with_cidr_blocks = optional(list(map(string)), [{<br>      from_port   = 443<br>      to_port     = 443<br>      protocol    = "tcp"<br>      description = "Allow outgoing https connection"<br>      cidr_blocks = "0.0.0.0/0"<br>    }])<br>    egress_with_ipv6_cidr_blocks                            = optional(list(map(string)), [])<br>    egress_with_source_security_group_id                    = optional(list(map(string)), [])<br>    egress_with_prefix_list_ids                             = optional(list(map(string)), [])<br>    egress_cidr_blocks                                      = optional(list(string), ["0.0.0.0/0"])<br>    egress_ipv6_cidr_blocks                                 = optional(list(string), ["::/0"])<br>    egress_prefix_list_ids                                  = optional(list(string), [])<br>    computed_egress_rules                                   = optional(list(string), [])<br>    computed_egress_with_self                               = optional(list(map(string)), [])<br>    computed_egress_with_cidr_blocks                        = optional(list(map(string)), [])<br>    computed_egress_with_ipv6_cidr_blocks                   = optional(list(map(string)), [])<br>    computed_egress_with_source_security_group_id           = optional(list(map(string)), [])<br>    computed_egress_with_prefix_list_ids                    = optional(list(map(string)), [])<br>    number_of_computed_egress_rules                         = optional(number, 0)<br>    number_of_computed_egress_with_self                     = optional(number, 0)<br>    number_of_computed_egress_with_cidr_blocks              = optional(number, 0)<br>    number_of_computed_egress_with_ipv6_cidr_blocks         = optional(number, 0)<br>    number_of_computed_egress_with_source_security_group_id = optional(number, 0)<br>    number_of_computed_egress_with_prefix_list_ids          = optional(number, 0)<br>    putin_khuylo                                            = optional(bool, true)<br>  })</pre> | n/a | yes |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_autoscaling_group_arn"></a> [autoscaling\_group\_arn](#output\_autoscaling\_group\_arn) | The ARN for this AutoScaling Group |
| <a name="output_autoscaling_group_availability_zones"></a> [autoscaling\_group\_availability\_zones](#output\_autoscaling\_group\_availability\_zones) | The availability zones of the autoscale group |
| <a name="output_autoscaling_group_default_cooldown"></a> [autoscaling\_group\_default\_cooldown](#output\_autoscaling\_group\_default\_cooldown) | Time between a scaling activity and the succeeding scaling activity |
| <a name="output_autoscaling_group_desired_capacity"></a> [autoscaling\_group\_desired\_capacity](#output\_autoscaling\_group\_desired\_capacity) | The number of Amazon EC2 instances that should be running in the group |
| <a name="output_autoscaling_group_enabled_metrics"></a> [autoscaling\_group\_enabled\_metrics](#output\_autoscaling\_group\_enabled\_metrics) | List of metrics enabled for collection |
| <a name="output_autoscaling_group_health_check_grace_period"></a> [autoscaling\_group\_health\_check\_grace\_period](#output\_autoscaling\_group\_health\_check\_grace\_period) | Time after instance comes into service before checking health |
| <a name="output_autoscaling_group_health_check_type"></a> [autoscaling\_group\_health\_check\_type](#output\_autoscaling\_group\_health\_check\_type) | EC2 or ELB. Controls how health checking is done |
| <a name="output_autoscaling_group_id"></a> [autoscaling\_group\_id](#output\_autoscaling\_group\_id) | The autoscaling group id |
| <a name="output_autoscaling_group_load_balancers"></a> [autoscaling\_group\_load\_balancers](#output\_autoscaling\_group\_load\_balancers) | The load balancer names associated with the autoscaling group |
| <a name="output_autoscaling_group_max_size"></a> [autoscaling\_group\_max\_size](#output\_autoscaling\_group\_max\_size) | The maximum size of the autoscale group |
| <a name="output_autoscaling_group_min_size"></a> [autoscaling\_group\_min\_size](#output\_autoscaling\_group\_min\_size) | The minimum size of the autoscale group |
| <a name="output_autoscaling_group_name"></a> [autoscaling\_group\_name](#output\_autoscaling\_group\_name) | The autoscaling group name |
| <a name="output_autoscaling_group_target_group_arns"></a> [autoscaling\_group\_target\_group\_arns](#output\_autoscaling\_group\_target\_group\_arns) | List of Target Group ARNs that apply to this AutoScaling Group |
| <a name="output_autoscaling_group_vpc_zone_identifier"></a> [autoscaling\_group\_vpc\_zone\_identifier](#output\_autoscaling\_group\_vpc\_zone\_identifier) | The VPC zone identifier |
| <a name="output_autoscaling_policy_arns"></a> [autoscaling\_policy\_arns](#output\_autoscaling\_policy\_arns) | ARNs of autoscaling policies |
| <a name="output_autoscaling_schedule_arns"></a> [autoscaling\_schedule\_arns](#output\_autoscaling\_schedule\_arns) | ARNs of autoscaling group schedules |
| <a name="output_iam_instance_profile_arn"></a> [iam\_instance\_profile\_arn](#output\_iam\_instance\_profile\_arn) | ARN assigned by AWS to the instance profile |
| <a name="output_iam_instance_profile_id"></a> [iam\_instance\_profile\_id](#output\_iam\_instance\_profile\_id) | Instance profile's ID |
| <a name="output_iam_instance_profile_unique"></a> [iam\_instance\_profile\_unique](#output\_iam\_instance\_profile\_unique) | Stable and unique string identifying the IAM instance profile |
| <a name="output_iam_role_arn"></a> [iam\_role\_arn](#output\_iam\_role\_arn) | The Amazon Resource Name (ARN) specifying the IAM role |
| <a name="output_iam_role_name"></a> [iam\_role\_name](#output\_iam\_role\_name) | The name of the IAM role |
| <a name="output_iam_role_unique_id"></a> [iam\_role\_unique\_id](#output\_iam\_role\_unique\_id) | Stable and unique string identifying the IAM role |
| <a name="output_launch_template_arn"></a> [launch\_template\_arn](#output\_launch\_template\_arn) | The ARN of the launch template |
| <a name="output_launch_template_default_version"></a> [launch\_template\_default\_version](#output\_launch\_template\_default\_version) | The default version of the launch template |
| <a name="output_launch_template_id"></a> [launch\_template\_id](#output\_launch\_template\_id) | The ID of the launch template |
| <a name="output_launch_template_latest_version"></a> [launch\_template\_latest\_version](#output\_launch\_template\_latest\_version) | The latest version of the launch template |
| <a name="output_launch_template_name"></a> [launch\_template\_name](#output\_launch\_template\_name) | The name of the launch template |
| <a name="output_security_group_arn"></a> [security\_group\_arn](#output\_security\_group\_arn) | The ARN of the security group |
| <a name="output_security_group_description"></a> [security\_group\_description](#output\_security\_group\_description) | The description of the security group |
| <a name="output_security_group_id"></a> [security\_group\_id](#output\_security\_group\_id) | The ID of the security group |
| <a name="output_security_group_name"></a> [security\_group\_name](#output\_security\_group\_name) | The name of the security group |
| <a name="output_security_group_owner_id"></a> [security\_group\_owner\_id](#output\_security\_group\_owner\_id) | The owner ID |
| <a name="output_security_group_vpc_id"></a> [security\_group\_vpc\_id](#output\_security\_group\_vpc\_id) | The VPC ID |
<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
